/* ===================================================================================
   public/stylesheets/styles.css
   LIGHT UI THEME (cream-thickened)
   - App background: #D0EAFF
   - Text: black (including links)
   - NO link underlines (even on hover/focus)
   - Modern surfaces, buttons, forms, dropdowns, modals, tables
   - Keeps existing markup/classes working: dark-surface/dark-card-body/content-card
   =================================================================================== */

/* ---------------------------
   Theme tokens
   --------------------------- */
:root{
  --app-bg: #D0EAFF;

  --text: #0b0f1a;                 /* near-black for comfort */
  --muted: rgba(11,15,26,.65);
  --muted-2: rgba(11,15,26,.48);

  /* “Cream” surfaces (slightly warm, thicker / less whitish) */
  --cream: #FFF9EE;                /* warm off-white */
  --surface: rgba(255,249,238,.86);
  --surface-2: rgba(255,249,238,.72);
  --surface-solid: var(--cream);

  --border: rgba(11,15,26,.16);
  --border-2: rgba(11,15,26,.12);

  --accent: #2B7BBB;              /* calm blue accent */
  --accent-soft: rgba(43,123,187,.16);
  --accent-hover: rgba(43,123,187,.24);

  --shadow-sm: 0 8px 22px rgba(11,15,26,.10);
  --shadow-md: 0 18px 52px rgba(11,15,26,.14);

  --radius: 14px;
  --radius-sm: 10px;
}

html, body { height: 100%; }
body{
  margin: 0;
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  color: var(--text);
  background: var(--app-bg);
}

/* keep your body class contract */
body.app-bg{
  background: var(--app-bg) !important;
  min-height: 100vh;
}

/* ---------------------------
   Global text & links (black, no underlines)
   --------------------------- */
body.app-bg,
body.app-bg *{
  color: inherit;
}

body.app-bg a{
  color: var(--text) !important;         /* black links */
  text-decoration: none !important;      /* remove underlines */
}

body.app-bg a:hover,
body.app-bg a:focus{
  color: var(--text) !important;
  text-decoration: none !important;      /* no underline on hover/focus */
  opacity: .88;                          /* subtle affordance instead */
}

/* override bootstrap "white text" utilities used in templates */
body.app-bg .text-white{ color: var(--text) !important; }
body.app-bg .text-muted{ color: var(--muted) !important; }
.text-muted-light{ color: var(--muted) !important; }

/* ---------------------------
   Header / Navbar
   --------------------------- */
header{
  position: sticky;
  top: 0;
  z-index: 1030;
}

/* the header element in layout.pug has header.bg-white.shadow-sm */
header.bg-white.shadow-sm{
  background: rgba(208,234,255,.86) !important;
  border-bottom: 1px solid rgba(11,15,26,.10);
  box-shadow: var(--shadow-sm);
  backdrop-filter: blur(10px);
}

/* brand / logo */
.brand-wrap{
  display: flex;
  align-items: center;
  gap: .75rem;
  min-width: 0;
  padding: .12rem .35rem;
  border-radius: var(--radius-sm);
}

.site-logo{
  width: 64px;
  height: 64px;
  object-fit: contain;
  display: block;
  border-radius: 12px;
  background: rgba(255,249,238,.82);
  border: 1px solid rgba(11,15,26,.12);
  box-shadow: 0 10px 26px rgba(11,15,26,.12);
  padding: 6px;
}

.brand{
  min-width: 0;
  line-height: 1.05;
}

.brand-name{
  font-size: 1.125rem;
  font-weight: 800;
  letter-spacing: -.01em;
  color: var(--text) !important;
  display: block;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 18rem;
  cursor: default;
}

.brand-sub{
  color: var(--muted) !important;
  font-size: .75rem;
  margin-top: 2px;
  display: block;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 18rem;
}

/* responsive logo */
@media (max-width: 767.98px){
  .site-logo{ width: 48px; height: 48px; }
  .brand-name{ font-size: 1rem; max-width: 10rem; }
  .brand-sub{ display: none; }
}

/* ---------------------------
   Main content container
   --------------------------- */
#main-content{ max-width: 1100px; }
#main-content.wide-content{ max-width: 1400px; }

/* dashboard_nav.js wraps content in .content-card */
.content-card,
.card.content-card{
  background: var(--surface);
  color: var(--text);
  border-radius: var(--radius);
  padding: 24px;
  border: 1px solid var(--border-2);
  box-shadow: var(--shadow-md);
}

/* Your templates use .dark-surface/.dark-card-body everywhere
   Keep class names but make them LIGHT surfaces now */
body.app-bg .dark-surface,
body.app-bg .card.dark-surface,
body.app-bg .modal-content.dark-surface,
body.app-bg .table-dark-surface{
  background: var(--surface);
  color: var(--text) !important;
  border: 1px solid var(--border-2);
  box-shadow: var(--shadow-md);
  border-radius: var(--radius);
}

/* inner body surface: slightly less opaque but still “thick” */
body.app-bg .dark-card-body,
body.app-bg .card .dark-card-body,
body.app-bg .modal-content .dark-card-body{
  background: var(--surface-2);
  color: var(--text) !important;
  padding: 1rem;
  border-radius: calc(var(--radius) - 4px);
  border: 1px solid rgba(11,15,26,.07);
}

/* If some pages want no wrapper card */
#main-content.no-card { padding-top: 0 !important; }

/* ---------------------------
   Tabs / Pills (top nav)
   --------------------------- */
.nav-tabs .nav-link{
  color: var(--text);
  border: none;
  padding: 10px 16px;
  margin-right: 6px;
  border-radius: 10px 10px 0 0;
  background: transparent;
}

.nav-tabs .nav-link.active{
  background: rgba(255,249,238,.90);
  color: var(--text);
  box-shadow: 0 2px 10px rgba(11,15,26,.10);
  border: 1px solid rgba(11,15,26,.12);
  border-bottom-color: transparent;
}

/* topTabs pills (layout.pug uses nav#topTabs .nav-pills) */
nav#topTabs .nav-pills{
  --bs-nav-link-padding-x: .9rem;
  --bs-nav-link-padding-y: .45rem;
}

nav#topTabs .nav-pills .nav-link{
  padding: .5rem .9rem;
  border-radius: 999px;
  color: var(--text) !important;
  background: rgba(255,249,238,.74);
  border: 1px solid rgba(11,15,26,.12);
  transition: transform .12s ease, box-shadow .14s ease, background-color .12s ease, border-color .12s ease;
  display: inline-flex;
  align-items: center;
  gap: .5rem;
  box-shadow: none;
  text-decoration: none !important;
}

nav#topTabs .nav-pills .nav-link:hover,
nav#topTabs .nav-pills .nav-link:focus{
  background: rgba(255,249,238,.90);
  border-color: rgba(11,15,26,.18);
  transform: translateY(-1px);
  box-shadow: var(--shadow-sm);
  text-decoration: none !important;
}

nav#topTabs .nav-pills .nav-link.active{
  background: var(--accent) !important;
  border-color: rgba(43,123,187,.85);
  box-shadow: var(--shadow-md);
  transform: translateY(-1px);
  color: #fff !important;
}

nav#topTabs .nav-pills .nav-link.active i,
nav#topTabs .nav-pills .nav-link.active .badge{
  color: #fff !important;
}

/* loading state for nav items */
.nav-link.is-loading,
.dropdown-item.is-loading{
  position: relative;
  pointer-events: none;
  opacity: .85;
}

.nav-link .tab-spinner,
.dropdown-item .tab-spinner{
  width: .85rem;
  height: .85rem;
  border: 2px solid rgba(11,15,26,.22);
  border-top-color: var(--accent);
  border-radius: 50%;
  display: inline-block;
  margin-left: .45rem;
  vertical-align: -0.1rem;
  animation: navSpin .7s linear infinite;
}

nav#topTabs .nav-pills .nav-link.is-loading{
  background: rgba(255,249,238,.92);
  border-color: rgba(11,15,26,.22);
  box-shadow: var(--shadow-sm);
}

@keyframes navSpin{
  to { transform: rotate(360deg); }
}

nav#topTabs .nav-pills .badge{
  font-size: .65rem;
  padding: .18rem .45rem;
  border-radius: .5rem;
  background: rgba(11,15,26,.08) !important;
  color: var(--text) !important;
  border: 1px solid rgba(11,15,26,.10);
}

/* keep nav from wrapping weirdly */
nav#topTabs ul.nav{ white-space: nowrap; }
nav#topTabs .nav-link{ text-overflow: ellipsis; overflow: hidden; max-width: 11.5rem; }

/* ensure loading spinner stays visible even with ellipsis */
nav#topTabs .nav-link.is-loading{
  overflow: visible;
  text-overflow: clip;
  max-width: none;
}

/* smaller screens: tabs wrap */
@media (max-width: 768px){
  .nav-tabs{ overflow-x: auto; white-space: nowrap; -webkit-overflow-scrolling: touch; }
  .nav-tabs .nav-item{ display: inline-block; }
}

/* ---------------------------
   Buttons (modern + black text)
   --------------------------- */
.btn{
  border-radius: 12px;
  box-shadow: none;
  transition: transform .12s ease, box-shadow .14s ease, background-color .12s ease, border-color .12s ease;
  text-decoration: none !important;
}

.btn:hover{ transform: translateY(-1px); box-shadow: var(--shadow-sm); }
.btn:active{ transform: translateY(0px); }

/* Primary: soft accent with BLACK text */
.btn.btn-primary,
body.app-bg .dark-surface .btn.btn-primary,
body.app-bg .content-card .btn.btn-primary{
  background: rgba(182,220,255,.96) !important;
  border-color: rgba(43,123,187,.40) !important;
  color: var(--text) !important;
}

.btn.btn-primary:hover,
.btn.btn-primary:focus{
  background: rgba(168,214,255,.99) !important;
  border-color: rgba(43,123,187,.60) !important;
}

/* Secondary */
.btn.btn-secondary{
  background: rgba(255,249,238,.90) !important;
  border-color: rgba(11,15,26,.14) !important;
  color: var(--text) !important;
}

.btn.btn-secondary:hover,
.btn.btn-secondary:focus{
  background: rgba(255,249,238,.96) !important;
  border-color: rgba(11,15,26,.18) !important;
}

/* Outline secondary for header/menu buttons */
.btn-outline-secondary{
  color: var(--text) !important;
  border-color: rgba(11,15,26,.18) !important;
  background: rgba(255,249,238,.74) !important;
}

.btn-outline-secondary:hover,
.btn-outline-secondary:focus{
  background: rgba(255,249,238,.92) !important;
  border-color: rgba(11,15,26,.24) !important;
}

/* Existing custom class used everywhere */
.btn-outline-light-custom{
  color: var(--text) !important;
  border-color: rgba(11,15,26,.18) !important;
  background: rgba(255,249,238,.74) !important;
}

.btn-outline-light-custom:hover,
.btn-outline-light-custom:focus{
  background: rgba(255,249,238,.92) !important;
  border-color: rgba(11,15,26,.24) !important;
}

/* disabled/loading */
.btn.loading,
.btn:disabled{
  opacity: .75;
  pointer-events: none;
  transform: none !important;
  box-shadow: none !important;
}

/* spinner alignment */
.btn.btn-primary .spinner-border{ vertical-align: text-bottom; }

/* ---------------------------
   Forms (inputs/selects/textarea)
   Thicker cream for fields & dropdowns
   --------------------------- */
.form-control,
.form-select,
textarea.form-control{
  border-radius: 12px;
  border: 1px solid rgba(11,15,26,.14);
  background: rgba(255,249,238,.94);
  color: var(--text);
  box-shadow: none;
}

.form-control::placeholder,
.form-select::placeholder,
textarea::placeholder{
  color: var(--muted-2);
}

/* password eye toggle inside input */
.password-field .form-control{
  padding-right: 2.4rem;
}
.password-toggle{
  position: absolute;
  right: .6rem;
  top: 50%;
  transform: translateY(-50%);
  border: 0;
  background: transparent;
  padding: .2rem;
  line-height: 1;
  color: var(--muted);
  z-index: 2;
}
.password-toggle:hover,
.password-toggle:focus{
  color: var(--text);
}

/* focus ring */
.form-control:focus,
.form-select:focus,
textarea.form-control:focus{
  border-color: rgba(43,123,187,.60);
  box-shadow: 0 0 0 4px var(--accent-soft);
  outline: none;
}

/* keep your dark-* form helper classes but make them light */
.form-control-dark,
.form-select-dark{
  background: rgba(255,249,238,.94) !important;
  color: var(--text) !important;
  border: 1px solid rgba(11,15,26,.14) !important;
  border-radius: 12px !important;
  box-shadow: none !important;
  color-scheme: light;
}

/* Ensure any form controls inside these containers look correct */
.content-card .form-control,
.content-card .form-select,
.dark-card-body .form-control,
.dark-card-body .form-select,
.dark-surface .form-control,
.dark-surface .form-select{
  background: rgba(255,249,238,.94) !important;
  color: var(--text) !important;
  border-color: rgba(11,15,26,.14) !important;
}

/* date/number sizing */
.dark-card-body input[type="date"],
.dark-card-body input[type="number"],
.dark-card-body input[type="text"],
.dark-card-body input[type="search"],
.dark-card-body input[type="tel"],
.dark-card-body input[type="email"],
.content-card input[type="date"],
.content-card input[type="number"],
.content-card input[type="text"]{
  height: calc(1.5em + 0.95rem);
  padding: .36rem .68rem;
}

/* ---------------------------
   Dropdowns (thicker cream)
   --------------------------- */
.dropdown .dropdown-menu{
  top: calc(100% + 6px);
  margin: 0;
}

.dropdown-menu,
header .dropdown-menu,
.content-card .dropdown-menu,
.dark-card-body .dropdown-menu,
.dark-surface .dropdown-menu{
  background: rgba(255,249,238,.97) !important;
  color: var(--text) !important;
  border: 1px solid rgba(11,15,26,.14) !important;
  border-radius: 12px;
  box-shadow: var(--shadow-md);
  padding: .35rem;
  /* modern dropdown motion (soft rise + blur) */
  opacity: 0;
  transform: translateY(6px);
  filter: blur(2px);
  transform-origin: top right;
  transition: opacity .14s ease, transform .18s ease, filter .18s ease;
  will-change: transform, opacity, filter;
  pointer-events: none;
}

.dropdown-menu.show{
  opacity: 1;
  transform: translateY(0);
  filter: blur(0);
  pointer-events: auto;
}

/* nested dropdown (Orders -> Operations -> New Registration) */
.dropdown-submenu{ position: relative; }
.dropdown-submenu > .dropdown-menu{
  top: -0.35rem;
  left: 100%;
  margin-left: .25rem;
  transform-origin: top left;
}
.dropdown-submenu:hover > .dropdown-menu,
.dropdown-submenu:focus-within > .dropdown-menu{
  display: block;
  opacity: 1;
  transform: translateY(0);
  filter: blur(0);
  pointer-events: auto;
}
/* keep hover "bridge" so the submenu doesn't collapse while moving sideways */
.dropdown-submenu::after{
  content: '';
  position: absolute;
  top: 0;
  left: 100%;
  width: 18px;
  height: 100%;
}
.dropdown-submenu > .dropdown-menu{ padding-left: .35rem; }

/* slightly different origin for left-aligned menus */
.dropdown-menu.dropdown-menu-start,
.dropdown-menu.dropdown-menu-start.show{
  transform-origin: top left;
}

/* reduce motion for accessibility */
@media (prefers-reduced-motion: reduce){
  .dropdown-menu,
  .dropdown-menu.show{
    transition: none;
    transform: none;
    filter: none;
  }
}

.dropdown-item{
  border-radius: 10px;
  padding: .45rem .75rem;
  color: var(--text) !important;
  text-decoration: none !important;
}

.dropdown-item:hover,
.dropdown-item:focus{
  background: var(--accent-soft) !important;
  color: var(--text) !important;
}

/* small dropdown toggle */
.dropdown.d-inline-block{ position: relative; }
.btn-sm.btn-light.dropdown-toggle{
  padding: .15rem .4rem;
  min-width: 2.0rem;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* ---------------------------
   Modals
   --------------------------- */
.modal-content{
  background: rgba(255,249,238,.96);
  border: 1px solid rgba(11,15,26,.14);
  border-radius: 16px;
  box-shadow: var(--shadow-md);
}

.modal-header{
  border-bottom: 1px solid rgba(11,15,26,.08);
}

.modal-footer{
  border-top: 1px solid rgba(11,15,26,.08);
}

/* close button should be normal (remove old invert behavior) */
.btn-close{ filter: none !important; opacity: .7; }
.btn-close:hover{ opacity: 1; }

/* ---------------------------
   Tables
   --------------------------- */
.table{
  color: var(--text) !important;
}

.table thead th{
  background: rgba(255,249,238,.96);
  border-bottom: 1px solid rgba(11,15,26,.12) !important;
  color: var(--text) !important;
  font-weight: 700;
  vertical-align: middle;
}

.table tbody tr td{
  border-top: 1px solid rgba(11,15,26,.08) !important;
  color: var(--text) !important;
  background: transparent !important;
}

.table.table-striped tbody tr:nth-of-type(odd){
  background: rgba(255,249,238,.50) !important;
}

.table.table-hover tbody tr:hover{
  background: rgba(255,249,238,.62) !important;
}

.table td.text-end{ vertical-align: middle; white-space: nowrap; }

/* small helper text inside tables */
.table small{ color: var(--muted) !important; }

/* Orders Explorer / Explorer controls */
#ordersExplorerModal .form-control,
#ordersExplorerModal .form-select{
  min-width: 160px;
}

/* ---------------------------
   Checkboxes & Radios (visible on light/cream UI)
   --------------------------- */
.content-card .form-check-label,
.dark-card-body .form-check-label,
.dark-surface .form-check-label{
  color: var(--text) !important;
  cursor: pointer;
  user-select: none;
}

.content-card .form-check-input,
.dark-card-body .form-check-input,
.dark-surface .form-check-input{
  /* keep a clean “field” look when unchecked */
  background-color: rgba(255,249,238,.92) !important;
  border: 1px solid rgba(11,15,26,.14) !important;
  width: 1.05rem;
  height: 1.05rem;
  margin-top: .12rem;
  box-shadow: none !important;

  /* let modern browsers also color native UI */
  accent-color: #111; /* dark check */
}

.content-card .form-check-input:focus,
.dark-card-body .form-check-input:focus,
.dark-surface .form-check-input:focus{
  box-shadow: 0 0 0 4px var(--accent-soft) !important;
  outline: none;
}

/* ✅ IMPORTANT: make checked state dark so it contrasts on cream */
.content-card .form-check-input:checked,
.dark-card-body .form-check-input:checked,
.dark-surface .form-check-input:checked{
  background-color: #111 !important;
  border-color: #111 !important;
}

/* ✅ Force a visible tick (covers browsers where the native tick disappears) */
.content-card .form-check-input[type="checkbox"]:checked,
.dark-card-body .form-check-input[type="checkbox"]:checked,
.dark-surface .form-check-input[type="checkbox"]:checked{
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill='white' d='M6.173 11.414 2.05 7.29 0 9.34l6.173 6.174L16 5.688 13.95 3.64z'/%3E%3C/svg%3E") !important;
  background-repeat: no-repeat !important;
  background-position: 50% 50% !important;
  background-size: 70% 70% !important;
}

/* Radio: show a white inner dot on dark fill */
.content-card .form-check-input[type="radio"]:checked,
.dark-card-body .form-check-input[type="radio"]:checked,
.dark-surface .form-check-input[type="radio"]:checked{
  background-image: radial-gradient(circle, #fff 0 35%, transparent 36%) !important;
}

/* ---------------------------
   Accordion (light)
   --------------------------- */
.dark-card-body .accordion,
.content-card .accordion,
.dark-surface .accordion{
  background: transparent !important;
}

.dark-card-body .accordion-item,
.content-card .accordion-item,
.dark-surface .accordion-item{
  background: rgba(255,249,238,.68) !important;
  border: 1px solid rgba(11,15,26,.10) !important;
  border-radius: 12px;
  margin-bottom: .55rem;
  overflow: hidden;
  box-shadow: none !important;
}

.dark-card-body .accordion-button,
.content-card .accordion-button,
.dark-surface .accordion-button{
  background: rgba(255,249,238,.92) !important;
  color: var(--text) !important;
  border: none !important;
  padding: .65rem 1rem;
  box-shadow: none !important;
  border-radius: 0 !important;
}

.dark-card-body .accordion-button:not(.collapsed),
.content-card .accordion-button:not(.collapsed),
.dark-surface .accordion-button:not(.collapsed){
  background: rgba(255,249,238,.96) !important;
}

.dark-card-body .accordion-button::after,
.content-card .accordion-button::after,
.dark-surface .accordion-button::after{
  filter: none !important;
  opacity: .85;
}

.dark-card-body .accordion-body,
.content-card .accordion-body,
.dark-surface .accordion-body{
  background: transparent !important;
  color: var(--text) !important;
  padding: .75rem 1rem;
  border-top: 1px solid rgba(11,15,26,.06) !important;
}

/* ---------------------------
   Expand chevron rotation (kept)
   --------------------------- */
.expand-toggle{
  color: var(--text) !important;
  text-decoration: none !important;
  outline: none;
  z-index: 10;
}

.expand-toggle:hover,
.expand-toggle:focus{
  color: var(--text) !important;
  text-decoration: none !important;
  box-shadow: none;
}

.expand-toggle i{
  display: inline-block;
  color: inherit;
  transition: transform .18s ease, color .12s ease;
  will-change: transform;
}

.expand-toggle[aria-expanded="true"] i{
  transform: rotate(180deg);
}

.expand-toggle .bi{
  transition: transform .18s ease;
}

.collapse.show + .expand-toggle .bi,
.expand-toggle[aria-expanded="true"] .bi{
  transform: rotate(180deg);
}

/* ---------------------------
   Printer totals alignment (kept)
   --------------------------- */
:root{
  --printer-total-width: 180px;
  --printer-label-width: 70px;
  --printer-value-width: calc(var(--printer-total-width) - var(--printer-label-width));
}

.printer-total-wrap{ position: relative; padding: 6px 0; }
.printer-total-box{
  width: var(--printer-total-width);
  min-width: var(--printer-total-width);
  max-width: var(--printer-total-width);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: .5rem;
  margin: 0 auto;
  box-sizing: border-box;
  white-space: nowrap;
}
.total-label{
  display: inline-block;
  width: var(--printer-label-width);
  text-align: right;
}
.total-value{
  display: inline-block;
  width: var(--printer-value-width);
  text-align: right;
}

@media (max-width: 560px){
  :root{ --printer-total-width: 140px; --printer-label-width: 60px; }
  .printer-total-box{ width: var(--printer-total-width); min-width: var(--printer-total-width); }
}

/* ---------------------------
   Cart table mobile safety (kept)
   --------------------------- */
@media (max-width: 576px){
  #cartTable th,
  #cartTable td{
    white-space: nowrap;
    vertical-align: middle;
  }
  #cartTable th:first-child,
  #cartTable td:first-child{
    min-width: 160px;
  }
  #cartTable th:last-child,
  #cartTable td:last-child{
    min-width: 90px;
  }
}

/* ---------------------------
   Service links (black, no underline)
   --------------------------- */
a.service-link{
  color: var(--text) !important;
  text-decoration: none !important;
  font-weight: 500;
}
a.service-link:hover,
a.service-link:focus{
  color: var(--text) !important;
  text-decoration: none !important;
  opacity: .88;
}

/* ---------------------------
   Accessibility focus (keyboard)
   --------------------------- */
:focus{ outline-offset: 2px; }
body.app-bg .btn:focus,
body.app-bg .nav-link:focus,
body.app-bg .dropdown-item:focus{
  box-shadow: 0 0 0 4px var(--accent-soft) !important;
  outline: none !important;
}

.dropdown-menu .dropdown-item i { width: 1.25rem; }


